{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\n// import EditRoom from \"./EditRoom.vue\";\naxios.defaults.withCredentials = true;\nexport default {\n  name: \"ManageReview\",\n  // components:{EditRoom},\n  data() {\n    return {\n      reviews: []\n      // role: null,\n    };\n  },\n  mounted() {\n    this.allReviews();\n    this.checkRole(); // ดึงข้อมูลเมื่อคอมโพเนนต์ถูกโหลด\n  },\n  methods: {\n    async checkRole() {\n      try {\n        await axios.get(`http://localhost:3000/session`).then(res => {\n          this.username = res.data.username;\n          this.memName = res.data.name;\n          this.role = res.data.role;\n        });\n        if (this.role !== \"admin\") {\n          console.log(this.role);\n          this.$router.push(\"/admin\"); // ถ้าไม่ใช่ admin ให้ redirect ไปหน้าแรก\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    allReviews() {\n      axios.get(\"http://localhost:3000/review\").then(res => {\n        this.reviews = res.data;\n      });\n    },\n    deleteReview(id, username) {\n      console.log(id);\n      const cf = window.confirm(\"ต้องการลบความคิดเห็นนี้?\");\n      if (cf) {\n        axios.delete(`http://localhost:3000/myReview/${username}/${id}`).then(res => {\n          console.log(res);\n          this.allReviews();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    // this.$router.push({ name: 'EditRoom', params: {data: JSON.stringify(roomId)} });\n  }\n};","map":{"version":3,"names":["axios","defaults","withCredentials","name","data","reviews","mounted","allReviews","checkRole","methods","get","then","res","username","memName","role","console","log","$router","push","err","deleteReview","id","cf","window","confirm","delete","catch"],"sources":["D:\\Room-Reservation\\Web-Service\\frontend\\src\\components\\ManageReview.vue"],"sourcesContent":["<template>\r\n  <div class=\"manage-review-page container\">\r\n    \r\n      <div class=\" justify-content-center\">\r\n        <h1 class=\"page-title\">Manage Review</h1>\r\n        <p class=\"page-description\">This is the Manage Review page.</p>\r\n      </div>\r\n    \r\n    <router-link to=\"/AdminHome\" style=\"text-decoration: none\">\r\n      <button class=\"btn btn-xs btn-primary mb-3\">Menu</button>\r\n    </router-link>\r\n\r\n    <div v-if=\"reviews.length === 0\" class=\"no-review-message\">\r\n      <p>No Reviews</p>\r\n    </div>\r\n    \r\n    \r\n      <div class=\"review-list mt-5\">\r\n        <div class=\"review-card\" v-for=\"review in reviews\" :key=\"review.id\">\r\n          <div class=\"review-user-info\">\r\n            <img :src=\"`http://localhost:3000/img_mem/${review.username}.jpg`\" alt=\"User Avatar\" class=\"avatar rounded-circle\" />\r\n            <div class=\"review-user-details\">\r\n              <h3 class=\"username\">{{ review.username }}</h3>\r\n              <div class=\"rating\">\r\n                <span\r\n                  v-for=\"n in 5\"\r\n                  :key=\"n\"\r\n                  class=\"star\"\r\n                  :class=\"{ filled: n <= review.score }\"\r\n                  >★</span\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p class=\"review-comment\">{{ review.comment }}</p>\r\n          <small class=\"review-date\">Reviewed on {{ new Date(review.reviewDate).toLocaleDateString() }}\r\n            <div class=\"d-flex justify-content-center\">\r\n              <button @click=\"deleteReview(review.reviewId,review.username)\" class=\"btn btn-xs btn-danger mt-2\">Delete</button>\r\n            </div>\r\n          </small>\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nimport axios from \"axios\";\r\n// import EditRoom from \"./EditRoom.vue\";\r\naxios.defaults.withCredentials = true;\r\nexport default {\r\n  name: \"ManageReview\",\r\n  // components:{EditRoom},\r\n  data() {\r\n    return {\r\n      reviews: [],\r\n      // role: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.allReviews();\r\n    this.checkRole(); // ดึงข้อมูลเมื่อคอมโพเนนต์ถูกโหลด\r\n  },\r\n  methods: {\r\n    async checkRole() {\r\n      try {\r\n        await axios.get(`http://localhost:3000/session`).then((res) => {\r\n          this.username = res.data.username;\r\n          this.memName = res.data.name;\r\n          this.role = res.data.role;\r\n        });\r\n        if (this.role !== \"admin\") {\r\n          console.log(this.role);\r\n          this.$router.push(\"/admin\"); // ถ้าไม่ใช่ admin ให้ redirect ไปหน้าแรก\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    allReviews() {\r\n      axios.get(\"http://localhost:3000/review\").then((res) => {\r\n        this.reviews = res.data;\r\n      });\r\n    },\r\n   deleteReview(id, username) {\r\n      console.log(id);\r\n      const cf = window.confirm(\"ต้องการลบความคิดเห็นนี้?\");\r\n      if (cf) {\r\n        axios\r\n          .delete(\r\n            `http://localhost:3000/myReview/${username}/${id}`\r\n          )\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.allReviews();\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    },\r\n    // this.$router.push({ name: 'EditRoom', params: {data: JSON.stringify(roomId)} });\r\n  },\r\n};\r\n</script>\r\n \r\n<style scoped>\r\n/* .manage-review {\r\n  max-width: 1400px;\r\n  border-radius: 10px;\r\n  background: linear-gradient(45deg, #ffffff, #a9bbff, #cbf3ff);\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n} */\r\n\r\n.manage-review-page {\r\n  padding: 20px;\r\n  padding: 20px;\r\n  border-radius: 30px;\r\n  background: linear-gradient(45deg, #cbafff, #917aff, #7de1ff);\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.page-title {\r\n  font-size: 2.5rem;\r\n  color: #343a40;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: #6c757d;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.review-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.review-card {\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n  max-width: 1000px;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\r\n  display: flex; /* ทำให้เป็น Flex Container */\r\n  justify-content: space-between; /* จัดให้อยู่ห่างกัน */\r\n  align-items: center; /* จัดให้อยู่กลางแนวตั้ง */\r\n}\r\n\r\n.review-user-info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.avatar {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.username {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.rating {\r\n  color: #ffcd3c;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.star.filled {\r\n  color: #ffcd3c;\r\n}\r\n\r\n.review-comment {\r\n  margin: 10px 0;\r\n  font-size: 1rem;\r\n  color: #555;\r\n}\r\n\r\n.review-date {\r\n  color: #777;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn {\r\n  font-size: 1.5rem;\r\n  padding: 10px 20px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-xs {\r\n  font-size: 1.3rem;\r\n  padding: 10px 20px;\r\n  width: auto;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.btn-danger:hover {\r\n  background-color: darkred;\r\n}\r\n</style>"],"mappings":";AA8CA,OAAOA,KAAI,MAAO,OAAO;AACzB;AACAA,KAAK,CAACC,QAAQ,CAACC,eAAc,GAAI,IAAI;AACrC,eAAe;EACbC,IAAI,EAAE,cAAc;EACpB;EACAC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE;MACT;IACF,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,UAAU,CAAC,CAAC;IACjB,IAAI,CAACC,SAAS,CAAC,CAAC,EAAE;EACpB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,MAAMR,KAAK,CAACU,GAAG,CAAC,+BAA+B,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;UAC7D,IAAI,CAACC,QAAO,GAAID,GAAG,CAACR,IAAI,CAACS,QAAQ;UACjC,IAAI,CAACC,OAAM,GAAIF,GAAG,CAACR,IAAI,CAACD,IAAI;UAC5B,IAAI,CAACY,IAAG,GAAIH,GAAG,CAACR,IAAI,CAACW,IAAI;QAC3B,CAAC,CAAC;QACF,IAAI,IAAI,CAACA,IAAG,KAAM,OAAO,EAAE;UACzBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,IAAI,CAAC;UACtB,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAC/B;MACF,EAAE,OAAOC,GAAG,EAAE;QACZJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;MAClB;IACF,CAAC;IACDb,UAAUA,CAAA,EAAG;MACXP,KAAK,CAACU,GAAG,CAAC,8BAA8B,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;QACtD,IAAI,CAACP,OAAM,GAAIO,GAAG,CAACR,IAAI;MACzB,CAAC,CAAC;IACJ,CAAC;IACFiB,YAAYA,CAACC,EAAE,EAAET,QAAQ,EAAE;MACxBG,OAAO,CAACC,GAAG,CAACK,EAAE,CAAC;MACf,MAAMC,EAAC,GAAIC,MAAM,CAACC,OAAO,CAAC,0BAA0B,CAAC;MACrD,IAAIF,EAAE,EAAE;QACNvB,KAAI,CACD0B,MAAM,CACL,kCAAkCb,QAAQ,IAAIS,EAAE,EAClD,EACCX,IAAI,CAAEC,GAAG,IAAK;UACbI,OAAO,CAACC,GAAG,CAACL,GAAG,CAAC;UAChB,IAAI,CAACL,UAAU,CAAC,CAAC;QACnB,CAAC,EACAoB,KAAK,CAAEP,GAAG,IAAK;UACdJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;QAClB,CAAC,CAAC;MACN;IACF;IACA;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}