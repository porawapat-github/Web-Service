{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"manage-review-page container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"no-review-message\"\n};\nconst _hoisted_3 = {\n  class: \"review-list mt-5\"\n};\nconst _hoisted_4 = {\n  class: \"review-user-info\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"review-user-details\"\n};\nconst _hoisted_7 = {\n  class: \"username\"\n};\nconst _hoisted_8 = {\n  class: \"rating\"\n};\nconst _hoisted_9 = {\n  class: \"review-comment\"\n};\nconst _hoisted_10 = {\n  class: \"review-date\"\n};\nconst _hoisted_11 = {\n  class: \"d-flex justify-content-center\"\n};\nconst _hoisted_12 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"justify-content-center\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"page-title\"\n  }, \"Manage Review\"), _createElementVNode(\"p\", {\n    class: \"page-description\"\n  }, \"This is the Manage Review page.\")], -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/AdminHome\",\n    style: {\n      \"text-decoration\": \"none\"\n    }\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createElementVNode(\"button\", {\n      class: \"btn btn-xs btn-primary mb-3\"\n    }, \"Menu\", -1 /* HOISTED */)])),\n    _: 1 /* STABLE */\n  }), $data.reviews.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _cache[1] || (_cache[1] = [_createElementVNode(\"p\", null, \"No Reviews\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.reviews, review => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"review-card\",\n      key: review.id\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n      src: `http://localhost:3000/img_mem/${review.username}.jpg`,\n      alt: \"User Avatar\",\n      class: \"avatar rounded-circle\"\n    }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h3\", _hoisted_7, _toDisplayString(review.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, n => {\n      return _createElementVNode(\"span\", {\n        key: n,\n        class: _normalizeClass([\"star\", {\n          filled: n <= review.score\n        }])\n      }, \"★\", 2 /* CLASS */);\n    }), 64 /* STABLE_FRAGMENT */))])])]), _createElementVNode(\"p\", _hoisted_9, _toDisplayString(review.comment), 1 /* TEXT */), _createElementVNode(\"small\", _hoisted_10, [_createTextVNode(\"Reviewed on \" + _toDisplayString(new Date(review.reviewDate).toLocaleDateString()) + \" \", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n      onClick: $event => $options.deleteReview(review.reviewId, review.username),\n      class: \"btn btn-xs btn-danger mt-2\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_12)])])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_router_link","to","style","default","_withCtx","_cache","_","$data","reviews","length","_hoisted_2","_createCommentVNode","_hoisted_3","_Fragment","_renderList","review","id","_hoisted_4","src","username","alt","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","n","_normalizeClass","filled","score","_hoisted_9","comment","_hoisted_10","_createTextVNode","Date","reviewDate","toLocaleDateString","_hoisted_11","onClick","$event","$options","deleteReview","reviewId","_hoisted_12"],"sources":["D:\\Room-Reservation\\Web-Service\\frontend\\src\\components\\ManageReview.vue"],"sourcesContent":["<template>\r\n  <div class=\"manage-review-page container\">\r\n    <div class=\"justify-content-center\">\r\n      <h1 class=\"page-title\">Manage Review</h1>\r\n      <p class=\"page-description\">This is the Manage Review page.</p>\r\n    </div>\r\n\r\n    <router-link to=\"/AdminHome\" style=\"text-decoration: none\">\r\n      <button class=\"btn btn-xs btn-primary mb-3\">Menu</button>\r\n    </router-link>\r\n\r\n    <div v-if=\"reviews.length === 0\" class=\"no-review-message\">\r\n      <p>No Reviews</p>\r\n    </div>\r\n\r\n    <div class=\"review-list mt-5\">\r\n      <div class=\"review-card\" v-for=\"review in reviews\" :key=\"review.id\">\r\n        <div class=\"review-user-info\">\r\n          <img\r\n            :src=\"`http://localhost:3000/img_mem/${review.username}.jpg`\"\r\n            alt=\"User Avatar\"\r\n            class=\"avatar rounded-circle\"\r\n          />\r\n          <div class=\"review-user-details\">\r\n            <h3 class=\"username\">{{ review.username }}</h3>\r\n            <div class=\"rating\">\r\n              <span\r\n                v-for=\"n in 5\"\r\n                :key=\"n\"\r\n                class=\"star\"\r\n                :class=\"{ filled: n <= review.score }\"\r\n                >★</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p class=\"review-comment\">{{ review.comment }}</p>\r\n        <small class=\"review-date\"\r\n          >Reviewed on {{ new Date(review.reviewDate).toLocaleDateString() }}\r\n          <div class=\"d-flex justify-content-center\">\r\n            <button\r\n              @click=\"deleteReview(review.reviewId, review.username)\"\r\n              class=\"btn btn-xs btn-danger mt-2\"\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </small>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\nimport axios from \"axios\";\r\n// import EditRoom from \"./EditRoom.vue\";\r\naxios.defaults.withCredentials = true;\r\nexport default {\r\n  name: \"ManageReview\",\r\n  // components:{EditRoom},\r\n  data() {\r\n    return {\r\n      reviews: [],\r\n      // role: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.allReviews();\r\n    this.checkRole(); // ดึงข้อมูลเมื่อคอมโพเนนต์ถูกโหลด\r\n  },\r\n  methods: {\r\n    async checkRole() {\r\n      try {\r\n        await axios.get(`http://localhost:3000/session`).then((res) => {\r\n          this.username = res.data.username;\r\n          this.memName = res.data.name;\r\n          this.role = res.data.role;\r\n        });\r\n        if (this.role !== \"admin\") {\r\n          console.log(this.role);\r\n          this.$router.push(\"/admin\"); // ถ้าไม่ใช่ admin ให้ redirect ไปหน้าแรก\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    allReviews() {\r\n      axios.get(\"http://localhost:3000/review\").then((res) => {\r\n        this.reviews = res.data;\r\n      });\r\n    },\r\n    deleteReview(id, username) {\r\n      console.log(id);\r\n      const cf = window.confirm(\"ต้องการลบความคิดเห็นนี้?\");\r\n      if (cf) {\r\n        axios\r\n          .delete(`http://localhost:3000/myReview/${username}/${id}`)\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.allReviews();\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n \r\n<style scoped>\r\n.manage-review-page {\r\n  padding: 20px;\r\n  padding: 20px;\r\n  border-radius: 30px;\r\n  background: linear-gradient(45deg, #cbafff, #917aff, #7de1ff);\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.page-title {\r\n  font-size: 2.5rem;\r\n  color: #343a40;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.page-description {\r\n  font-size: 1.2rem;\r\n  color: #6c757d;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.review-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.review-card {\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n  max-width: 1000px;\r\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\r\n  display: flex; /* ทำให้เป็น Flex Container */\r\n  justify-content: space-between; /* จัดให้อยู่ห่างกัน */\r\n  align-items: center; /* จัดให้อยู่กลางแนวตั้ง */\r\n}\r\n\r\n.review-user-info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.avatar {\r\n  width: 50px;\r\n  height: 50px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.username {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.rating {\r\n  color: #ffcd3c;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.star.filled {\r\n  color: #ffcd3c;\r\n}\r\n\r\n.review-comment {\r\n  margin: 10px 0;\r\n  font-size: 1rem;\r\n  color: #555;\r\n}\r\n\r\n.review-date {\r\n  color: #777;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn {\r\n  font-size: 1.5rem;\r\n  padding: 10px 20px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn-xs {\r\n  font-size: 1.3rem;\r\n  padding: 10px 20px;\r\n  width: auto;\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.btn-danger:hover {\r\n  background-color: darkred;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA8B;;EAD3CC,GAAA;EAWqCD,KAAK,EAAC;;;EAIlCA,KAAK,EAAC;AAAkB;;EAEpBA,KAAK,EAAC;AAAkB;mBAjBrC;;EAuBeA,KAAK,EAAC;AAAqB;;EAC1BA,KAAK,EAAC;AAAU;;EACfA,KAAK,EAAC;AAAQ;;EAWpBA,KAAK,EAAC;AAAgB;;EAClBA,KAAK,EAAC;AAAa;;EAEnBA,KAAK,EAAC;AAA+B;oBAvCpD;;;uBACEE,mBAAA,CAiDM,OAjDNC,UAiDM,G,0BAhDJC,mBAAA,CAGM;IAHDJ,KAAK,EAAC;EAAwB,IACjCI,mBAAA,CAAyC;IAArCJ,KAAK,EAAC;EAAY,GAAC,eAAa,GACpCI,mBAAA,CAA+D;IAA5DJ,KAAK,EAAC;EAAkB,GAAC,iCAA+B,E,sBAG7DK,YAAA,CAEcC,sBAAA;IAFDC,EAAE,EAAC,YAAY;IAACC,KAA6B,EAA7B;MAAA;IAAA;;IAPjCC,OAAA,EAAAC,QAAA,CAQM,MAAyDC,MAAA,QAAAA,MAAA,OAAzDP,mBAAA,CAAyD;MAAjDJ,KAAK,EAAC;IAA6B,GAAC,MAAI,oB;IARtDY,CAAA;MAWeC,KAAA,CAAAC,OAAO,CAACC,MAAM,U,cAAzBb,mBAAA,CAEM,OAFNc,UAEM,EAAAL,MAAA,QAAAA,MAAA,OADJP,mBAAA,CAAiB,WAAd,YAAU,oB,MAZnBa,mBAAA,gBAeIb,mBAAA,CAkCM,OAlCNc,UAkCM,I,kBAjCJhB,mBAAA,CAgCMiB,SAAA,QAhDZC,WAAA,CAgBgDP,KAAA,CAAAC,OAAO,EAAjBO,MAAM;yBAAtCnB,mBAAA,CAgCM;MAhCDF,KAAK,EAAC,aAAa;MAA4BC,GAAG,EAAEoB,MAAM,CAACC;QAC9DlB,mBAAA,CAkBM,OAlBNmB,UAkBM,GAjBJnB,mBAAA,CAIE;MAHCoB,GAAG,mCAAmCH,MAAM,CAACI,QAAQ;MACtDC,GAAG,EAAC,aAAa;MACjB1B,KAAK,EAAC;4BArBlB2B,UAAA,GAuBUvB,mBAAA,CAWM,OAXNwB,UAWM,GAVJxB,mBAAA,CAA+C,MAA/CyB,UAA+C,EAAAC,gBAAA,CAAvBT,MAAM,CAACI,QAAQ,kBACvCrB,mBAAA,CAQM,OARN2B,UAQM,I,cAPJ7B,mBAAA,CAK2BiB,SAAA,QA/BzCC,WAAA,CA2B4B,CAAC,EAANY,CAAC;aADV5B,mBAAA,CAK2B;QAHxBH,GAAG,EAAE+B,CAAC;QACPhC,KAAK,EA7BrBiC,eAAA,EA6BsB,MAAM;UAAAC,MAAA,EACMF,CAAC,IAAIX,MAAM,CAACc;QAAK;SAClC,GAAC;0CAKV/B,mBAAA,CAAkD,KAAlDgC,UAAkD,EAAAN,gBAAA,CAArBT,MAAM,CAACgB,OAAO,kBAC3CjC,mBAAA,CAUQ,SAVRkC,WAUQ,GA/ChBC,gBAAA,CAsCW,cAAY,GAAAT,gBAAA,KAAOU,IAAI,CAACnB,MAAM,CAACoB,UAAU,EAAEC,kBAAkB,MAAK,GACnE,iBAAAtC,mBAAA,CAOM,OAPNuC,WAOM,GANJvC,mBAAA,CAKS;MAJNwC,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,YAAY,CAAC1B,MAAM,CAAC2B,QAAQ,EAAE3B,MAAM,CAACI,QAAQ;MACrDzB,KAAK,EAAC;OACP,UAED,iBA7CZiD,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}